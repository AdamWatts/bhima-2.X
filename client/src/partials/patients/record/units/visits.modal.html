<div class="modal-header">
  <ol class="headercrumb">
    <li class="static">{{ "FORM.INFO.PATIENTS" | translate }}</li>
    <li class="title">{{ AdmitCtrl.isAdmission ? "PATIENT_RECORDS.VISITS.ADMISSION" : "PATIENT_RECORDS.VISITS.DISCHARGE" | translate }}</li>
  </ol>
</div>

<form name="VisitForm" bh-submit="AdmitCtrl.admit(VisitForm)" bh-form-defaults novalidate>
<div class="modal-body">

  <div
    class="form-group"
    ng-class="{ 'has-error' : VisitForm.$submitted && VisitForm.diagnosis.$invalid }">
    <label class="control-label">{{ "FORM.LABELS.DIAGNOSIS" | translate }}</label>

    <ui-select
      name="diagnosis"
      ng-model="AdmitCtrl.diagnosis"
      theme="bootstrap"
      ng-required="!AdmitCtrl.isAdmission">
      <ui-select-match placeholder="{{ 'FORM.PLACEHOLDERS.DIAGNOSIES' | translate }}">
        <span>{{$select.selected.label}} ({{$select.selected.code}})</span>
      </ui-select-match>
      <ui-select-choices ui-select-focus-patch repeat="diagnosis in AdmitCtrl.diagnosese | filter:$select.search">
        <span ng-bind-html="diagnosis.label | highlight:$select.search"></span>
        (<span ng-bind-html="diagnosis.code | highlight:$select.search"></span>)
      </ui-select-choices>
    </ui-select>

    <div class="help-block" ng-messages="VisitForm.diagnosis.$error" ng-show="VisitForm.$submitted">
      <div ng-messages-include="partials/templates/messages.tmpl.html"></div>
    </div>
  </div>

  <div
    class="form-group"
    ng-class="{ 'has-error' : VisitForm.$submitted && VisitForm.notes.$invalid }">
    <label class="control-label">{{ "FORM.LABELS.NOTES" | translate }}</label>
    <textarea name="notes" ng-model="AdmitCtrl.notes" class="form-control"></textarea>

    <div class="help-block" ng-messages="VisitForm.notes.$error" ng-show="VisitForm.$submitted">
      <div ng-messages-include="partials/templates/messages.tmpl.html"></div>
    </div>

  </div>
</div>

<div class="modal-footer">
  <button type="button" class="btn btn-default" ng-click="AdmitCtrl.cancel()" data-method="cancel">
    {{ "FORM.BUTTONS.CANCEL" | translate }}
  </button>
  <bh-loading-button loading-state="AdmitCtrl.$loading">
    {{ "FORM.BUTTONS.SUBMIT" | translate }}
  </bh-loading-button>
</div>
</form>
